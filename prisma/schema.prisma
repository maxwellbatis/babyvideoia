generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Credential {
  id         Int      @id @default(autoincrement())
  name       String   @unique
  value      String
  updated_at DateTime @updatedAt
}

model AppImage {
  id                 Int      @id @default(autoincrement())
  filename           String
  cloudinaryUrl      String
  cloudinaryPublicId String
  tag                String   @default("app-mockup")
  description        String   @default("")
  sceneId            String?
  sceneDescription   String?
  size               Int
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model GeneratedImage {
  id                 Int      @id @default(autoincrement())
  filename           String
  cloudinaryUrl      String?
  cloudinaryPublicId String?
  prompt             String
  sceneDescription   String
  sceneNumber        Int
  imageNumber        Int
  generationMethod   String
  resolution         String
  tema               String
  tipo               String
  publico            String
  tags               String[]
  usageCount         Int      @default(0)
  performance        Float    @default(0)
  size               Int
  localPath          String?
  isReusable         Boolean  @default(true)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@index([sceneDescription])
  @@index([tema, tipo, publico])
  @@index([generationMethod])
  @@index([tags])
  @@index([usageCount])
  @@index([performance])
}
